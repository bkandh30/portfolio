---
import TagPill from './TagPill.astro';
import { formatDate } from '@/utils/date';

interface Props {
  slug: string;
  title: string;
  date: Date;
  summary: string;
  tags: string[];
  readingTime?: string;
}

const { slug, title, date, summary, tags, readingTime } = Astro.props;

const formattedDate = formatDate(date, 'short');
---

<li class="post-card group">
  <article>
    <a href={`/blog/${slug}`} class="block">
      <div class="flex items-baseline justify-between gap-4 mb-2">
        <h3 class="font-body text-base font-semibold text-text transition-colors group-hover:text-accent">
          {title}
        </h3>
        <span class="shrink-0 flex items-center gap-2 font-mono text-xs text-text-muted tracking-wider">
          <time datetime={date.toISOString()}>
            {formattedDate}
          </time>
          {readingTime && (
            <>
              <span class="opacity-40" aria-hidden="true">&middot;</span>
              <span>{readingTime}</span>
            </>
          )}
        </span>
      </div>

      <p class="text-sm leading-relaxed text-text-secondary mb-3">
        {summary}
      </p>
    </a>

    <ul class="flex flex-wrap gap-1.5 list-none p-0 m-0">
      {tags.map((tag) => (
        <li>
          <TagPill tag={tag} />
        </li>
      ))}
    </ul>
  </article>
</li>

<style>
  .post-card {
    padding: 1.25rem 0;
    border-bottom: 1px solid var(--color-border-subtle);
    transition: border-color 0.2s;
  }

  .post-card:first-child {
    padding-top: 0;
  }

  .post-card:hover {
    border-bottom-color: var(--color-border);
  }
</style>
