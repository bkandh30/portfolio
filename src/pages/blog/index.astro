---
import BaseLayout from '@/layouts/BaseLayout.astro';
import TopicCard from '@/components/TopicCard.astro';
import { topics } from '@/data/topics';
import { getPublishedBlogPosts, getTopicPostCounts } from '@/utils/blog';

const allPosts = await getPublishedBlogPosts();
const postCounts = getTopicPostCounts(allPosts);
---

<BaseLayout title="Blog â€” Bhavya Kandhari" description="Writing about system design, distributed systems, engineering, and technical reading.">
  <div class="mx-auto max-w-2xl px-5 pt-16 sm:pt-24">
    <header class="mb-12">
      <h1 class="font-display text-3xl sm:text-4xl leading-tight tracking-tight text-text">
        Blog
      </h1>
      <p class="mt-3 text-base text-text-secondary">
        Writing about system design learnings, research paper summaries, book notes, and engineering writeups.
      </p>
    </header>

    <ul class="grid grid-cols-1 sm:grid-cols-2 gap-4 list-none p-0 m-0">
      {topics.map((topic) => (
        <li>
          <TopicCard
            slug={topic.slug}
            title={topic.title}
            description={topic.description}
            postCount={postCounts.get(topic.slug) ?? 0}
          />
        </li>
      ))}
    </ul>
  </div>
</BaseLayout>
